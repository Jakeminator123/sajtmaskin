Sajtmaskin Quick Reference
==========================

This file provides quick access to commonly used APIs and patterns.

MODELS (January 2026)
---------------------

OpenAI Models:
- gpt-4o-mini     : Fast, cheap ($0.15/1M tokens) - use for routing/enhancing
- gpt-4o          : Best quality for complex tasks
- gpt-image-1     : Image generation (recommended)
- dall-e-3        : Image generation (alternative)
- text-embedding-ada-002 : Embeddings

v0 API Models (Vercel):
- v0-1.5-md       : Standard code generation (128K context)
- v0-1.5-lg       : Premium code generation (512K context)

AI SDK 6 KEY IMPORTS
--------------------

```typescript
// Core generation
import { generateText, streamText } from 'ai';

// OpenAI provider
import { openai } from '@ai-sdk/openai';

// Structured output
import { z } from 'zod';

// Example: Generate text
const { text } = await generateText({
  model: openai('gpt-4o-mini'),
  prompt: 'Hello!',
});

// Example: Stream text
const result = streamText({
  model: openai('gpt-4o-mini'),
  messages: [{ role: 'user', content: 'Hello!' }],
});

for await (const chunk of result.textStream) {
  process.stdout.write(chunk);
}

// Example: Structured output with Zod
const { object } = await generateObject({
  model: openai('gpt-4o-mini'),
  schema: z.object({
    title: z.string(),
    tags: z.array(z.string()),
  }),
  prompt: 'Generate metadata for a blog post about AI',
});
```

V0 SDK KEY IMPORTS
------------------

```typescript
import { createClient } from 'v0-sdk';

const v0 = createClient({ apiKey: process.env.V0_API_KEY });

// Generate new code
const result = await v0.chat.completions.create({
  model: 'v0-1.5-md', // or 'v0-1.5-lg' for premium
  messages: [{ role: 'user', content: 'Create a landing page...' }],
});

// Continue conversation (refine)
const refined = await v0.chat.completions.create({
  model: 'v0-1.5-md',
  messages: [
    ...previousMessages,
    { role: 'user', content: 'Make the header bigger' }
  ],
});
```

WEB SEARCH (Responses API)
--------------------------

```typescript
import OpenAI from 'openai';

const openai = new OpenAI();

const response = await openai.responses.create({
  model: 'gpt-4o-mini',
  tools: [{ type: 'web_search' }],
  input: 'What are the latest Next.js 15 features?',
});
```

IMAGE GENERATION
----------------

```typescript
import OpenAI from 'openai';

const openai = new OpenAI();

const response = await openai.images.generate({
  model: 'gpt-image-1',
  prompt: 'A beautiful sunset over mountains',
  size: '1024x1024',
  quality: 'high',
});

const imageUrl = response.data[0].url;
```

SAJTMASKIN PIPELINE
-------------------

1. User prompt arrives at /api/orchestrate
2. Semantic Router (gpt-4o-mini) classifies intent
3. Code Crawler finds relevant code (no AI, just string matching)
4. Semantic Enhancer (gpt-4o-mini) improves vague prompts
5. Prompt Enricher combines everything (no AI)
6. v0 API generates/refines code
7. Result includes demoUrl for preview

Key files:
- lib/orchestrator-agent.ts  - Main pipeline coordinator
- lib/semantic-router.ts     - Intent classification
- lib/code-crawler.ts        - Code context extraction
- lib/semantic-enhancer.ts   - Prompt improvement
- lib/prompt-enricher.ts     - Final prompt assembly
- lib/v0-generator.ts        - v0 API wrapper

COMMON PATTERNS
---------------

Streaming with AI SDK 6:
```typescript
import { streamText } from 'ai';

const result = streamText({
  model: openai('gpt-4o-mini'),
  messages,
  onFinish: ({ text, usage }) => {
    console.log('Tokens used:', usage);
  },
});

return result.toDataStreamResponse();
```

Tool calling:
```typescript
import { generateText, tool } from 'ai';
import { z } from 'zod';

const result = await generateText({
  model: openai('gpt-4o-mini'),
  tools: {
    weather: tool({
      description: 'Get weather for a city',
      parameters: z.object({
        city: z.string(),
      }),
      execute: async ({ city }) => {
        return { temp: 20, condition: 'sunny' };
      },
    }),
  },
  prompt: 'What is the weather in Stockholm?',
});
```

DOCUMENTATION SOURCES
---------------------

This MCP server provides access to scraped documentation:

- docgrab__ai-sdk.dev__docs/     : AI SDK 6 full docs
- docgrab__platform.openai.com__docs/ : OpenAI API docs
- docgrab__vercel.com__docs/     : Vercel platform docs
- docgrab__v0.app__docs_introduction/ : v0 introduction

Use the search_docs tool to find specific information:
  search_docs("streamText", "ai-sdk")
  search_docs("web_search", "openai")
  search_docs("deployment", "vercel")

ENVIRONMENT VARIABLES
---------------------

Required:
- V0_API_KEY          : Vercel v0 API key
- OPENAI_API_KEY      : OpenAI API key

Optional:
- BLOB_READ_WRITE_TOKEN : Vercel Blob for media
- STRIPE_SECRET_KEY   : Payments
- VERCEL_API_TOKEN    : Deployments

Development:
- DEV_VERBOSE_AI_LOGS=true  : Detailed AI logs
- DEV_DEBUG_V0_API=true     : Log v0 requests
- MCP_DEBUG=true            : MCP server debug

---
Last updated: 2026-01-06

