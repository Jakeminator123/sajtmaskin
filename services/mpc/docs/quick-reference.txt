Sajtmaskin Quick Reference
==========================

This file provides quick access to commonly used APIs and patterns.

MODELS (January 2026)
---------------------

OpenAI Models:
- gpt-4o-mini     : Fast, cheap ($0.15/1M tokens) - use for routing/enhancing
- gpt-4o          : Best quality for complex tasks
- gpt-image-1     : Image generation (recommended)
- dall-e-3        : Image generation (alternative)
- text-embedding-ada-002 : Embeddings

v0 API Models (Vercel):
- v0-1.5-md       : Standard code generation (128K context)
- v0-1.5-lg       : Premium code generation (512K context)

AI SDK 6 KEY IMPORTS
--------------------

```typescript
// Core generation
import { generateText, streamText } from 'ai';

// OpenAI provider
import { openai } from '@ai-sdk/openai';

// Structured output
import { z } from 'zod';

// Example: Generate text
const { text } = await generateText({
  model: openai('gpt-4o-mini'),
  prompt: 'Hello!',
});

// Example: Stream text
const result = streamText({
  model: openai('gpt-4o-mini'),
  messages: [{ role: 'user', content: 'Hello!' }],
});

for await (const chunk of result.textStream) {
  process.stdout.write(chunk);
}

// Example: Structured output with Zod
const { object } = await generateObject({
  model: openai('gpt-4o-mini'),
  schema: z.object({
    title: z.string(),
    tags: z.array(z.string()),
  }),
  prompt: 'Generate metadata for a blog post about AI',
});
```

V0 SDK (Platform API)
---------------------

```typescript
import { createClient } from 'v0-sdk';

const v0 = createClient({ apiKey: process.env.V0_API_KEY });

// Create chat (new build)
const chat = await v0.chats.create({
  message: 'Create a landing page...',
  modelConfiguration: {
    modelId: 'v0-max',   // v0-mini | v0-pro | v0-max
    thinking: true,
  },
  responseMode: 'sync',
});

// Continue chat (refine)
const followup = await v0.chats.sendMessage({
  chatId: chat.id,
  message: 'Make the header bigger',
  responseMode: 'experimental_stream',
});
```

WEB SEARCH (Responses API)
--------------------------

```typescript
import OpenAI from 'openai';

const openai = new OpenAI();

const response = await openai.responses.create({
  model: 'gpt-4o-mini',
  tools: [{ type: 'web_search' }],
  input: 'What are the latest Next.js 15 features?',
});
```

IMAGE GENERATION
----------------

```typescript
import OpenAI from 'openai';

const openai = new OpenAI();

const response = await openai.images.generate({
  model: 'gpt-image-1',
  prompt: 'A beautiful sunset over mountains',
  size: '1024x1024',
  quality: 'high',
});

const imageUrl = response.data[0].url;
```

SAJTMASKIN CORE PATHS
---------------------

- src/lib/v0/v0-generator.ts           - v0 Platform API wrapper
- src/lib/hooks/useV0ChatMessaging.ts  - SSE + chat orchestration
- src/app/api/v0/chats/stream/route.ts - Create chat (stream)
- src/app/api/v0/chats/[chatId]/stream/route.ts - Send message (stream)

COMMON PATTERNS
---------------

Streaming with AI SDK 6:
```typescript
import { streamText } from 'ai';

const result = streamText({
  model: openai('gpt-4o-mini'),
  messages,
  onFinish: ({ text, usage }) => {
    console.log('Tokens used:', usage);
  },
});

return result.toDataStreamResponse();
```

Tool calling:
```typescript
import { generateText, tool } from 'ai';
import { z } from 'zod';

const result = await generateText({
  model: openai('gpt-4o-mini'),
  tools: {
    weather: tool({
      description: 'Get weather for a city',
      parameters: z.object({
        city: z.string(),
      }),
      execute: async ({ city }) => {
        return { temp: 20, condition: 'sunny' };
      },
    }),
  },
  prompt: 'What is the weather in Stockholm?',
});
```

DOCUMENTATION SOURCES
---------------------

This MCP server exposes resources from:
- services/mpc/docs (docs://local/*)
- LLM/ (docs://local/llm/*)
- docgrab__* folders if present under services/mpc/docs

ENVIRONMENT VARIABLES
---------------------

Required:
- V0_API_KEY          : Vercel v0 API key
- OPENAI_API_KEY      : OpenAI API key

Optional:
- BLOB_READ_WRITE_TOKEN : Vercel Blob for media
- STRIPE_SECRET_KEY   : Payments
- VERCEL_API_TOKEN    : Deployments

Development:
- DEV_VERBOSE_AI_LOGS=true  : Detailed AI logs
- DEV_DEBUG_V0_API=true     : Log v0 requests
- MCP_DEBUG=true            : MCP server debug

---
Last updated: 2026-01-06

