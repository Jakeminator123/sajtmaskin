================================================================================
                    SHADCN/UI INTEGRATION GUIDE
================================================================================

√ñVERSIKT
--------
shadcn/ui √§r ett komponentbibliotek som ger anv√§ndare tillg√•ng till
professionella, moderna UI-komponenter. I sajtmaskin anv√§nds det f√∂r att
l√•ta anv√§ndare l√§gga till f√§rdiga block och komponenter i sina hemsidor.

ARKITEKTUR
----------
Anv√§ndare (Builder UI)
       ‚Üì
ShadcnBlockPicker (React-komponent)
       ‚Üì
shadcn-registry-service.ts (h√§mtar fr√•n registry)
       ‚Üì
ui.shadcn.com/r/ (shadcn Registry API)
       ‚Üì
v0 Platform API (bygger komponenten)

================================================================================
VIKTIGA FILER
================================================================================

FRONTEND (UI f√∂r anv√§ndare)
---------------------------
‚Ä¢ src/components/builder/ShadcnBlockPicker.tsx
  - Klickbart UI f√∂r att v√§lja komponenter
  - Visar kategorier med svenska etiketter
  - Preview-bilder f√∂r ljust/m√∂rkt tema

‚Ä¢ src/components/builder/ChatInterface.tsx
  - Integrerar med block picker
  - Skickar valda komponenter till v0

BACKEND (Registry & API)
------------------------
‚Ä¢ src/lib/shadcn-registry-service.ts
  - Central service f√∂r att h√§mta data fr√•n shadcn registry
  - Caching (5 minuter)
  - Funktioner: getBlocksByCategory(), fetchRegistryItem(), searchBlocks()

‚Ä¢ src/lib/shadcn-registry-types.ts
  - TypeScript-typer f√∂r registry items

‚Ä¢ src/lib/shadcn-registry-utils.ts
  - buildShadcnBlockPrompt() - skapar prompt f√∂r v0
  - rewriteRegistryImports() - omskriver imports

‚Ä¢ src/lib/v0/v0-generator.ts
  - initFromRegistry() - startar projekt fr√•n shadcn block

KONFIGURATION
-------------
‚Ä¢ components.json
  - style: "new-york-v4" (modern stil)
  - registries: {} (f√∂r framtida community registries)

================================================================================
REGISTRY API
================================================================================

ENDPOINTS
---------
Base URL: https://ui.shadcn.com

Registry index:
  GET /r/styles/new-york-v4/registry.json
  ‚Üí Returnerar alla tillg√§ngliga komponenter och blocks

Specifik komponent:
  GET /r/styles/new-york-v4/{name}.json
  ‚Üí Exempel: /r/styles/new-york-v4/login-01.json

Preview-bilder:
  Light: /r/styles/new-york-v4/{name}-light.png
  Dark:  /r/styles/new-york-v4/{name}-dark.png

REGISTRY ITEM STRUKTUR
----------------------
{
  "name": "login-01",
  "type": "registry:block",
  "description": "A simple login form",
  "categories": ["authentication", "login"],
  "registryDependencies": ["button", "input", "label", "card"],
  "files": [
    {
      "path": "blocks/login-01/page.tsx",
      "content": "...",
      "type": "registry:page"
    }
  ]
}

================================================================================
TILLG√ÑNGLIGA KATEGORIER
================================================================================

Kategori        | Svenska        | Ikon | Exempel
----------------|----------------|------|---------------------------
authentication  | Inloggning     | üîê   | login-01 till login-05
dashboard       | Kontrollpanel  | üìä   | dashboard-01
sidebar         | Sidof√§lt       | üìã   | sidebar-01 till sidebar-05
charts          | Diagram        | üìà   | chart-area-interactive
forms           | Formul√§r       | üìÑ   | -
calendar        | Kalender       | üìÖ   | -
marketing       | Marknadsf√∂ring | üéØ   | -
landing         | Landningssidor | üöÄ   | -

================================================================================
HUR ANV√ÑNDARE L√ÑGGER TILL KOMPONENTER
================================================================================

1. Anv√§ndaren klickar p√• "Komponenter"-knappen i builder
2. ShadcnBlockPicker √∂ppnas med kategorier och previews
3. Anv√§ndaren v√§ljer en komponent (t.ex. "Login 01")
4. Klickar "L√§gg till"
5. buildShadcnBlockPrompt() skapar en prompt f√∂r v0
6. v0 API genererar komponenten i anv√§ndarens projekt
7. Komponenten visas i preview

PROMPT-GENERERING
-----------------
buildShadcnBlockPrompt() skapar en detaljerad prompt som:
- Beskriver komponenten som ska l√§ggas till
- Listar registry dependencies
- Anger import-mappningar:
  - @/registry/{style}/ui/* ‚Üí @/components/ui/*
  - @/registry/{style}/lib/utils ‚Üí @/lib/utils
- Instruerar v0 att integrera med befintlig kod

================================================================================
V0 INTEGRATION
================================================================================

STARTA FR√ÖN REGISTRY
--------------------
import { initFromRegistry } from "@/lib/v0/v0-generator";

const result = await initFromRegistry(
  "https://ui.shadcn.com/r/styles/new-york-v4/login-01.json",
  { quality: "max" }
);

// result inneh√•ller:
// - chatId: f√∂r att forts√§tta konversationen
// - demoUrl: preview URL
// - files: genererade filer
// - versionId: f√∂r nedladdning

L√ÑGGA TILL I BEFINTLIG CHATT
----------------------------
Anv√§nd buildShadcnBlockPrompt() f√∂r att skapa en prompt, sedan:
- onCreateChat() om ingen chatt finns
- onSendMessage() om chatt redan finns

================================================================================
COMMUNITY REGISTRIES (FRAMTIDA UTBYGGNAD)
================================================================================

shadcn har 118+ community registries med extra komponenter:

Registry         | Beskrivning
-----------------|------------------------------------------
@magicui         | 150+ animerade komponenter
@aceternity      | Landing page-komponenter
@animate-ui      | Animerade primitiver
@motion-primitives | Motion-komponenter
@kokonutui       | Tailwind + Motion

Kan integreras genom att l√§gga till i components.json:
{
  "registries": {
    "@magicui": "https://magicui.design/r"
  }
}

Och sedan anv√§nda: npx shadcn add @magicui/magic-card

================================================================================
FELS√ñKNING
================================================================================

KOMPONENTER LADDAS INTE
-----------------------
‚Ä¢ Kontrollera n√§tverksanslutning till ui.shadcn.com
‚Ä¢ Verifiera att style √§r korrekt (new-york-v4)
‚Ä¢ Kolla browser console f√∂r fetch-fel

PREVIEW-BILDER VISAS INTE
-------------------------
‚Ä¢ Bilderna hostas p√• shadcn - kontrollera URL-format
‚Ä¢ Vissa nyare komponenter kan sakna preview-bilder
‚Ä¢ Fallback: visa placeholder eller text

V0 API-FEL
----------
‚Ä¢ Se src/lib/v0/v0-generator.ts f√∂r felhantering
‚Ä¢ Kontrollera V0_API_KEY i milj√∂variabler
‚Ä¢ Rate limits: v√§nta och f√∂rs√∂k igen
‚Ä¢ Timeout: √∂ka maxDuration i route.ts

CACHE-PROBLEM
-------------
‚Ä¢ Registry service cachar i 5 minuter
‚Ä¢ Tvinga refresh genom att rensa cachen:
  - Starta om dev-server
  - Eller l√§gg till cache-busting parameter
